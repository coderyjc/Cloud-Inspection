# UNI-APP 接口文档

> 所有返回一律封装在 Msg 消息体内，可以选择创建一个实体类用来承载信息。
>
> 响应字段均为消息体中的字段。
>
> 字段类型不一定按照表中的来，可以自行更改，然后添加备注说明。

## UserController

### 获取用户【今日】的任务统计信息

#### 请求


| 字段 | 说明   | 类型   | 备注 | 是否必填 |
| ---- | ------ | ------ | ---- | -------- |
| id   | 用户id | String |      | 是       |

#### 响应

| 字段           | 说明                   | 类型 | 备注 | 是否必填 |
| -------------- | ---------------------- | ---- | ---- | -------- |
| count_receive  | 已接受任务（status=2） | int  |      | 是       |
| count_check    | 验收中任务（status=3） | int  |      | 是       |
| count_complete | 已完成任务（status=4） | int  |      | 是       |
| count_timeout  | 超时任务               |      |      | 是       |

#### 备注

目前只有这几个，以后还会有巡检任务功能和消息功能，可能还要加上。

## DamageController

### 获取当前已有损伤列表

#### 请求

| 字段  | 说明     | 类型 | 备注   | 是否必填 |
| ----- | -------- | ---- | ------ | -------- |
| pn    | 第几页   | int  | 默认1  |          |
| limit | 一页多少 | int  | 默认10 |          |

#### 响应

| 字段               | 说明         | 类型   | 备注 | 是否必填 |
| ------------------ | ------------ | ------ | ---- | -------- |
| damage_id          | 损伤id       | int    |      | 是       |
| damage_type_name   | 损伤类型名称 | string |      | 是       |
| damage_source      | 损伤上报者   | int    |      | 是       |
| damage_description | 损伤描述     | string |      | 是       |

### 获取单个损伤的详情信息

#### 请求


| 字段      | 说明   | 类型   | 备注 | 是否必填 |
| --------- | ------ | ------ | ---- | -------- |
| damage_id | 损伤id | string |      | 是       |

#### 响应

| 字段               | 说明     | 类型   | 备注 | 是否必填 |
| ------------------ | -------- | ------ | ---- | -------- |
| damage_id          | 损伤id   | int    |      | 是       |
| damage_type_name   | 类型名称 | string |      | 是       |
| damage_description | 描述     | string |      | 是       |
| damage_post_time   | 上报时间 | string |      | 是       |
| damage_source      | 上报者   | int    |      | 是       |
| location           | 位置信息 | string |      | 是       |

## TaskController

> 任务状态：接受 -> 提交 -> 审核 -> 完成

### 获取用户正在进行的任务列表


#### 请求


| 字段    | 说明   | 类型 | 备注 | 是否必填 |
| ------- | ------ | ---- | ---- | -------- |
| user_id | 用户id | int  |      | 是 |
| pn    | 第几页   | int  | 默认1  |          |
| limit | 一页多少 | int  | 默认10 |          |

#### 响应

| 字段 | 说明 | 类型 | 备注 | 是否必填 |
| ---- | ---- | ---- | ---- | -------- |
| task_id | 任务id | int |      | 是 |
| damage_type_name   | 损伤类型名称 | string |      | 是       |
| damage_source      | 损伤上报来源   | int    |      | 是       |
| damage_description | 损伤描述     | string |      | 是       |
| post_user_name | 上报人姓名 | string | | 是 |
| deadline | 截止日期 | string | | 是 |

#### 备注

这个不先写了  有些复杂

正在进行的任务包括已延期的任务+正在进行但未申请延期的任务.

task\damage\user 三表连接



### 获取用户【指定日期】的已完成任务列表


#### 请求

| 字段    | 说明   | 类型   | 备注     | 是否必填 |
| ------- | ------ | ------ | -------- | -------- |
| user_id | 用户id | int    |          | 是       |
| date    | 日期   | string | 默认今日 |          |
| pn    | 第几页   | int  | 默认1  |          |
| limit | 一页多少 | int  | 默认10 |          |

#### 响应

| 字段 | 说明 | 类型 | 备注 | 是否必填 |
| ---- | ---- | ---- | ---- | -------- |
| task_id | 任务id | int |      | 是 |
| damage_type_name   | 损伤类型名称 | string |      | 是       |
| damage_source      | 损伤上报来源   | int    |      | 是       |
| damage_description | 损伤描述     | string |      | 是       |
| post_user_name | 上报人姓名 | string | | 是 |
| complete_date | 完成日期 | string | | 是 |

### 获取用户【指定日期】的超时任务列表


#### 请求


| 字段 | 说明 | 类型 | 备注 | 是否必填 |
| ---- | ---- | ---- | ---- | -------- |
| user_id | 用户id | int    |          | 是       |
| date    | 日期   | string | 默认今日 |          |
| pn    | 第几页   | int  | 默认1  |          |
| limit | 一页多少 | int  | 默认10 |          |

#### 响应

| 字段 | 说明 | 类型 | 备注 | 是否必填 |
| ---- | ---- | ---- | ---- | -------- |
| task_id | 任务id | int |      | 是 |
| damage_type_name   | 损伤类型名称 | string |      | 是       |
| damage_source      | 损伤上报来源   | int    |      | 是       |
| damage_description | 损伤描述     | string |      | 是       |
| post_user_name | 上报人姓名 | string | | 是 |
| deadline | 截止日期 | string | | 是 |

### 获取用户当前正在审核的任务列表

#### 请求


| 字段 | 说明 | 类型 | 备注 | 是否必填 |
| ---- | ---- | ---- | ---- | -------- |
| user_id | 用户id | int    |          | 是       |
| pn    | 第几页   | int  | 默认1  |          |
| limit | 一页多少 | int  | 默认10 |          |

#### 响应

| 字段 | 说明 | 类型 | 备注 | 是否必填 |
| ---- | ---- | ---- | ---- | -------- |
|      |      |      |      |          |
| task_id | 任务id | int |      | 是 |
| damage_type_name   | 损伤类型名称 | string |      | 是       |
| damage_source      | 损伤上报来源   | int    |      | 是       |
| damage_description | 损伤描述     | string |      | 是       |
| post_user_name | 上报人姓名 | string | | 是 |
| deadline | 截止日期 | string | | 是 |

### 提交任务


#### 请求


| 字段 | 说明 | 类型 | 备注 | 是否必填 |
| ---- | ---- | ---- | ---- | -------- |
|      |      |      |      |          |

#### 响应

| 字段 | 说明 | 类型 | 备注 | 是否必填 |
| ---- | ---- | ---- | ---- | -------- |
|      |      |      |      |          |

### 任务延期

#### 请求


| 字段 | 说明 | 类型 | 备注 | 是否必填 |
| ---- | ---- | ---- | ---- | -------- |
|      |      |      |      |          |

#### 响应

| 字段 | 说明 | 类型 | 备注 | 是否必填 |
| ---- | ---- | ---- | ---- | -------- |
|      |      |      |      |          |

### 取消任务


#### 请求


| 字段 | 说明 | 类型 | 备注 | 是否必填 |
| ---- | ---- | ---- | ---- | -------- |
|      |      |      |      |          |

#### 响应

| 字段 | 说明 | 类型 | 备注 | 是否必填 |
| ---- | ---- | ---- | ---- | -------- |
|      |      |      |      |          |



